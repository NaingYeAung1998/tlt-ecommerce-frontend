(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{4483:(e,a,t)=>{Promise.resolve().then(t.bind(t,8024))},8024:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var l=t(5155),o=t(4581),d=t(2302),r=t(1116),s=t(3577),i=t(8534),n=t(5695),c=t(2115),u=t(6874),p=t.n(u),h=t(3386);let g=function(){let e=(0,n.useSearchParams)().get("id"),a=(0,n.useRouter)(),[t,u]=(0,c.useState)({}),[g,x]=(0,c.useState)([]),[v,f]=(0,c.useState)([]),[m,j]=(0,c.useState)(null),[y,_]=(0,c.useState)(null),[b,w]=(0,c.useState)(!1),[C,k]=(0,c.useState)(""),N=(e,a)=>{u({...t,[e]:a})},P=async()=>{let l={...t};if(l.category={category_id:""},l.grade={grade_id:""},l.category.category_id=m?m.value:"",l.grade.grade_id=y?y.value:"",console.log(l),e){let o=await fetch("http://localhost:5500/api/v1/product/"+e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(o.ok)a.push("/dashboard/product?showSuccess=true&action=update&product="+t.product_name);else{let e=await o.json();k(null==e?void 0:e.message),w(!0)}}else{let e=await fetch("http://localhost:5500/api/v1/product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(e.ok)a.push("/dashboard/product?showSuccess=true&action=create&product="+t.product_name);else{let a=await e.json();k(null==a?void 0:a.message),w(!0)}}},S=async()=>{let e=await fetch("http://localhost:5500/api/v1/category?perPage=-1");if(e.ok){let a=await e.json(),t=[];a.forEach((e,a)=>{let l={value:e.category_id,label:e.category_name};t.push(l)}),x(t)}},I=async()=>{let e=await fetch("http://localhost:5500/api/v1/grade?perPage=-1");if(e.ok){let a=await e.json(),t=[];a.forEach((e,a)=>{let l={value:e.grade_id,label:e.grade_name};t.push(l)}),f(t)}},E=async e=>{let a=await fetch("http://localhost:5500/api/v1/product/"+e);if(a.ok){var t,l,o,d;let e=await a.json();u(e),j({value:null==(t=e.category)?void 0:t.category_id,label:null==(l=e.category)?void 0:l.category_name}),_({value:null==(o=e.grade)?void 0:o.grade_id,label:null==(d=e.grade)?void 0:d.grade_name})}};return(0,c.useEffect)(()=>{S(),I(),e&&E(e)},[]),(0,l.jsxs)(o.default,{sx:{padding:5,flexDirection:"column",backgroundColor:"white",borderRadius:"10px"},children:[(0,l.jsx)(d.A,{severity:"error",hidden:!b,children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:["Failed to create product: "," ",(0,l.jsx)(r.default,{fontWeight:"bold",children:C})]})}),(0,l.jsx)("br",{}),(0,l.jsx)(r.default,{variant:"body1",fontWeight:"bold",children:"Add Product"}),(0,l.jsx)("div",{className:"pt-[20px]",children:(0,l.jsx)(s.default,{InputLabelProps:{shrink:!!t.product_name},value:t.product_name,onChange:e=>{N("product_name",e.target.value)},variant:"outlined",label:"Name",sx:{width:{xs:"100%",lg:"50%"}}})}),(0,l.jsx)("div",{className:"pt-[20px]",children:(0,l.jsx)(s.default,{InputLabelProps:{shrink:!!t.product_code},value:t.product_code,onChange:e=>{N("product_code",e.target.value)},variant:"outlined",label:"Code",sx:{width:{xs:"100%",lg:"50%"}}})}),(0,l.jsx)("div",{className:"pt-[20px]",children:(0,l.jsx)(h.Ay,{options:g,placeholder:"Categories",styles:{control:e=>({...e,width:"50%",height:"60px"}),menu:e=>({...e,width:"50%"}),menuPortal:e=>({...e,zIndex:1,width:"50%"})},value:m,onChange:e=>j(e)})}),(0,l.jsx)("div",{className:"pt-[20px]",children:(0,l.jsx)(h.Ay,{options:v,placeholder:"Grades",styles:{control:e=>({...e,width:"50%",height:"60px"}),menu:e=>({...e,width:"50%"}),menuPortal:e=>({...e,zIndex:1,width:"50%"})},value:y,onChange:e=>_(e)})}),(0,l.jsx)("div",{className:"pt-[20px]",children:(0,l.jsx)(s.default,{InputLabelProps:{shrink:!!t.product_description},value:t.product_description,onChange:e=>{N("product_description",e.target.value)},variant:"outlined",label:"Description",sx:{width:{xs:"100%",lg:"50%"},zIndex:0}})}),(0,l.jsx)("div",{className:"pt-[20px]",children:(0,l.jsx)(s.default,{InputLabelProps:{shrink:!!t.note},value:t.note,onChange:e=>{N("note",e.target.value)},variant:"outlined",label:"Note",sx:{width:{xs:"100%",lg:"50%"},zIndex:0}})}),(0,l.jsxs)("div",{className:"flex justify-end pt-[20px] gap-4",children:[(0,l.jsx)(p(),{href:"/dashboard/product",children:(0,l.jsx)(i.default,{variant:"outlined",color:"warning",children:"Cancel"})}),(0,l.jsx)(i.default,{variant:"contained",color:"primary",onClick:()=>P(),children:e?"Update":"Create"})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[660,448,266,0,474,874,577,386,441,684,358],()=>a(4483)),_N_E=e.O()}]);